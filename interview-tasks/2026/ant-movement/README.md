## Интерактивное решение задачи с муравьём на C++
### Введение
Это вторая версия решения, написанная на C++ и дополненная интерактивной HTML-страницей с возможностью решать поставленную задачу с другими входными данными. Можно посмотреть [первую версию](https://github.com/SD5th/code-sandbox/tree/8ea0c24/interview-tasks/2026/ant-movement) (ссылка ведёт на предыдущий коммит), где представлено консольное решение и README с описанием.

### Описание кода на С++

##### Муравьиная матрица
Доска с муравьём представлена с помощью объектов:

  - **Cell** — структура с двумя полями типа `int`: `cell.x` и `cell.y`
  - **AntMatrix** — обёртка над `std::unordered_set<Cell> cells`
  
AntMatrix хранит клетки, в которых побывал муравей, вычисляет характеристики поля и предоставляет два основных метода: `bool contains(Cell)` для проверки посещения клетки и `int solve()` для вычисления решения.

##### Метод int Solve()

###### Аргументы
Функция получает на вход начальную клетку и **`std::function<bool(Cell)> canVisitCell`** — предикат для определения, может ли муравей переместиться в указанную клетку.

###### Алгоритм работы
Имея в виду чисто символическую сложность первоначальной задачи, никаких алгоритмических изысков здесь нет. Реализован *обход графа в глубину*, он же **DFS**. 
1. Начинаем с клетки `(x, y)`:
  1) Если `canVisitCell` вернула `false`, возвращаем 0
  2) Если клетка уже находится в `cells`, возвращаем 0
2. Помечаем клетку `(x, y)` как посещённую, заносим в `cells`
3. Присваем локальному счётчику значение 1
4. Увеличиваем счётчик на значения, полученные из вызовово функции для соседних клеток (сверху, сниху, слева, справа)
5. Возвращаем значения счётчика

###### Остальное 
В настоящее время, помимо исходной функции (сумма цифр координат), реализованы также функции суммы модулей и суммы квадратов координат. С помощью **лямбда-замыкания** можно настроить "порог", с которым будет сравниваться значение функции для клетки. Кроме того, метод `solve` вычисляет и заполняет публичные поля AntMatrix, связанные с размерами таблицы.

##### AntUtils
В файлах AntUtils реализовано ещё два механизма, которые реализованы *именно* на C++ чисто по приколу. Это:
  1) **DrawAntMatrix()** — используя границы, вычисленные в `solve()`, проходит по матрице и выводит пиксели в изображение формата `.ppm`, затем с помощью пакета **ImageMagick** преобразует его в `.png`
  2) **GenerateIndexHTML()** — самая жуткая часть работы, где создаётся `index.html` для веб-интерфейса, заполняя его полученным решением, изображением и другими данным

### WebUI
С помощью **lighttpd** на `localhost:8085` запускается HTTP-сервер, который изначально показывает решение задачи из условия, а затем позволяет решить задачу с другими функциями и начальными точками. Введённые данные через `solve.cgi` передаются в новую итерацию вычислений на C++. Генерируется новое изображение, подменяется `index.html`, и страница отображает решение для новых данных.

### Сборка и запуск
Решение собирается с помощью **CMake** на **C++17**. CMake вызывается на стадии сборки Docker-контейнера на **Alpine Linux**, где с использованием статических библиотек компилируется исполняемый файл `solve-ant-problem`. На следующей стадии устанавливаются пакеты для работы с изображениями и сервером, копируется бинарник с предыдущего этапа, настраивается HTTP-сервер и запускается **`start.sh`**, который исполняет `solve-ant-problem` и запускает сервер.

### Использование
В файле Makefile предоставлены скрипты с говорящими названиями для быстрой работы с `docker-compose`. Доступные команды:
- `make build` — собрать контейнер
- `make run` — запустить контейнер
- `make build-and-run` — собрать и запустить
- `make stop` — остановить контейнер
- `make shell` — открыть консоль внутри контейнера


### пост скриптум
Я делал это чуть дольше, чем предполагал, но, если честно, с огромным удовольствием. В процессе прошёл по огромному списку тем, хорошо закрепил работу с Docker и CMake — до этого "решения" я их обычно избегал, но теперь, кажется, буду стараться вставить всюду. В итоге получился своеобразный пет-проект с возможностью порисовать муравьём в браузере. Было весело.

Кстати, очень часто, если задать на сайте неправильные (обычно слишком большие) числа, бинарник может просто поймать segmentation fault и упасть. Мне кажется, что это даже забавно.